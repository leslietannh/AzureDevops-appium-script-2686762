# Maven
# Build your Java project and run tests with Apache Maven.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/java

trigger:
- main

pool:
  vmImage: ubuntu-latest

steps:
- task: Bash@3
  inputs:
    targetType: 'inline'
    script: 'npm install'
    
- task: Kobiton.Kobiton.trigger-automation-test-release-task.Trigger-automation-test@2
  displayName: 'Kobiton Automation Test Executor'
  inputs:
    gitRepo: 'https://github.com/leslietannh/AzureDevops-appium-script-2686762'
    gitBranch: master
    gitSSH: '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'
    deviceName: 'Galaxy S7'
    devicePlatformVersion: Android
    devicePlatformName: Android
    commands: 'mvn test'
    publishJUnitResults: true
    testResultsFiles: '**/surefire-reports/TEST-*.xml'
    logType: combined
    goals: 'package'
